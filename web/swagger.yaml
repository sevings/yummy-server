consumes:
  - application/json
info:
  title: Yummy
  version: 0.1.0
securityDefinitions:
  ApiKeyHeader:
    type: apiKey
    in: header
    name: X-User-Key
definitions:
  UserID:
    type: integer
    format: int64
  Error:
    type: object
    properties:
      message:
        type: string
    example:
      message: Access denied
  Color:
    type: string
    pattern: '#[0-9a-d]{6}'
    example: '#373737'
    description: color in rgb
  User:
    type: object
    properties:
      id:
        type: integer
        format: int64
        minimum: 1
      name:
        type: string
        minLength: 1
        maxLength: 20
      showName:
        type: string
        minLength: 1
        maxLength: 20
      isOnline:
        type: boolean
      avatar:
        type: string
    example:
      id: 1
      name: 'binque'
      showName: 'Бинк'
      isOnline: false
  UserList:
    type: object
    properties:
      users:
        type: array
        items:
          $ref: '#/definitions/User'
    required:
      - users
  Profile:
    allOf:
      - $ref: '#/definitions/User'
      - type: object
        properties:
          gender:
            type: string
            enum: [male, female, not set]
          isDaylog:
            type: boolean
          privacy:
            type: string
            enum: [all, registered, followers]
          title:
            type: string
            maxLength: 260
          karma:
            type: number
            format: float
          createdAt:
            type: string
            format: date-time
          lastSeenAt:
            type: string
            format: date-time
          invitedBy:
            $ref: '#/definitions/User'
          ageLowerBound:
            type: integer
          ageUpperBound:
            type: integer
          country:
            type: string
            maxLength: 50
          city:
            type: string
            maxLength: 50
          design:
            $ref: '#/definitions/Design'
          counts:
            type: object
            properties:
              entries:
                type: integer
              followings:
                type: integer
              followers:
                type: integer
              ignored:
                type: integer
              invited:
                type: integer
              comments:
                type: integer
              favorites:
                type: integer
              tags:
                type: integer
          relations:
            type: object
            properties:
              toMe:
                type: string
                enum: [followed, requested, cancelled, ignored, none]
              fromMe:
                type: string
                enum: [followed, requested, cancelled, ignored, none]
        example:
          gender: male
          isDaylog: false
          privacy: registered
          title: 'some tlog title'
          karma: 100.0
          createdAt: '1985-04-12T23:20:50.52Z'
          lastSeenAt: '1985-04-12T23:20:50.52Z'
          country: Россия
          city: Казань
          counts:
            entries: 13
            followings: 4
            followers: 15
            ignored: 0
            invited: 0
            comments: 22
            favorites: 1
            tags: 0
          relations:
            toMe: none
            fromMe: followed
  Design:
    type: object
    properties:
      css:
        type: string
      backgroundColor:
        $ref: '#/definitions/Color'
      textColor:
        $ref: '#/definitions/Color'
      fontFamily:
        type: string
      fontSize:
        type: integer
      textAlignment:
        type: string
        enum: [left, right, center, justify]
  AuthProfile:
    allOf:
      - $ref: '#/definitions/Profile'
      - type: object
        properties:
          birthday:
            type: string
            format: full-date
          showInTops:
            type: boolean
          account:
            type: object
            properties:
              apiKey:
                type: string
              validThru:
                type: string
                format: date-time
              email:
                type: string
              verified:
                type: boolean
        example:
          account:
            apiKey: 'blah-blah-blah'
            validThru: '1985-04-12T23:20:50.52Z'
            email: 'mail@example.com'
            verified: true
  Entry:
    type: object
    properties:
      id:
        type: integer
        format: int64
        minimum: 1
      author:
        $ref: '#/definitions/User'
      createdAt:
        type: string
        format: date-time
      rating:
        type: integer
      title:
        type: string
      content:
        type: string
      editContent:
        type: string
      wordCount:
        type: integer
      privacy:
        type: string
        enum: [all, some, me, anonymous]
      visibleFor:
        type: array
        items:
          $ref: '#/definitions/User'
      isVotable:
        type: boolean
      commentCount:
        type: integer
      vote:
        type: string
        enum: [not, pos, neg, ban]
      isFavorited:
        type: boolean
      isWatching:
        type: boolean
      comments:
        type: array
        items:
          $ref: '#/definitions/Comment'
    example:
      id: 152
      createdAt: '1985-04-12T23:20:50.52Z'
      rating: -3
      title: 'example title'
      content: '<p>some text with <b>html</b> tags</p>'
      wordCount: 5
      privacy: 'all'
      isVotable: true
      commentCount: 0
  Feed:
    type: object
    properties:
      entries:
        type: array
        items:
          $ref: '#/definitions/Entry'
  VoteStatus:
    type: object
    properties:
      id:
        type: integer
        format: int64
        minimum: 1
      rating:
        type: integer
      vote:
        type: string
        enum: [not, pos, neg, ban]
  FavoriteStatus:
    type: object
    properties:
      id:
        type: integer
        format: int64
        minimum: 1
      isFavorited:
        type: boolean
  WatchingStatus:
    type: object
    properties:
      id:
        type: integer
        format: int64
        minimum: 1
      isWatching:
        type: boolean
  Relationship:
    type: object
    properties:
      from:
        type: integer
        format: int64
        minimum: 1
      to:
        type: integer
        format: int64
        minimum: 1
      relation:
        type: string
        enum: [followed, requested, cancelled, ignored, none]
  Comment:
    type: object
    properties:
      id:
        type: integer
        format: int64
        minimum: 1
      author:
        $ref: '#/definitions/User'
      entryId:
        type: integer
        format: int64
        minimum: 1
      createdAt:
        type: string
        format: date-time
      content:
        type: string
        minLength: 1
      rating:
        type: integer
      vote:
        type: string
        enum: [not, pos, neg, ban]
    example:
      id: 999
      entryId: 152
      createdAt: '1985-04-12T23:20:50.52Z'
      content: '<p>some text with <b>html</b> tags</p>'
  CommentList:
    type: object
    properties:
      comments:
        type: array
        items:
          $ref: '#/definitions/Comment'
parameters:
  pathId:
    in: path
    name: id
    type: integer
    format: int64
    minimum: 1
    required: true
  pathName:
    in: path
    name: 'name'
    type: string
    minLength: 1
    maxLength: 20
    required: true
  limit:
    in: query
    name: limit
    type: integer
    minimum: 1
    maximum: 100
    default: 50
  skip:
    in: query
    name: skip
    type: integer
    default: 0
  longerThan:
    in: query
    name: longer_than
    type: integer
  shorterThan:
    in: query
    name: shorter_than
    type: integer
  tag:
    in: query
    name: tag
    type: string
    maxLength: 50
  sort:
    in: query
    name: sort
    type: string
    enum: [new, old, best]
    default: new
paths:
  /account/email/{email}:
    get:
      summary: check if email is used
      parameters:
        - in: path
          name: email
          type: string
          required: true
      tags:
        - account
      responses:
        200:
          description: check result
          schema:
            type: object
            properties:
              email:
                type: string
              isFree:
                type: boolean
            required:
              - email
              - isFree
            example:
              email: mail@example.com
              isFree: true
  /account/name/{name}:
    get:
      summary: check if name is used
      parameters:
        - in: path
          name: name
          type: string
          minLength: 1
          maxLength: 20
          required: true
      tags:
        - account
      responses:
        200:
          description: check result
          schema:
            type: object
            properties:
              name:
                type: string
              isFree:
                type: boolean
            required:
              - name
              - isFree
            example:
              name: example
              isFree: false
  /account/register:
    post:
      summary: register new account
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: name
          type: string
          minLength: 1
          maxLength: 20
          required: true
        - in: formData
          name: email
          type: string
          required: true
        - in: formData
          name: password
          type: string
          minLength: 6
          required: true
        - in: formData
          name: invite
          type: string
          required: true
        - in: formData
          name: referrer
          type: string
          minLength: 1
          maxLength: 20
          required: true
        - in: formData
          name: birthday
          type: string
          format: full-date
        - in: formData
          name: gender
          type: string
          enum: [not set, male, female]
          default: not set
        - in: formData
          name: country
          type: string
          default: ''
        - in: formData
          name: city
          type: string
          default: ''
      tags:
        - account
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/AuthProfile'
        400:
          description: email or name already exists
          schema:
            $ref: '#/definitions/Error'
  /account/login:
    post:
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: name
          type: string
          minLength: 1
          maxLength: 20
          required: true
        - in: formData
          name: password
          type: string
          minLength: 6
          required: true
      tags:
        - account
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/AuthProfile'
        400:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /account/verification:
    post:
      summary: request verification email
      security:
        - ApiKeyHeader: []
      tags:
        - account
      responses:
        200:
          description: email has been sent
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
  /account/verification/{email}:
    get:
      summary: verify account email
      parameters:
        - in: path
          type: string
          name: email
          required: true
        - in: query
          type: string
          name: code
          minLength: 20
          maxLength: 20
          required: true
      security:
        - ApiKeyHeader: []
      tags:
        - account
      responses:
        200:
          description: verified
        400:
          description: code or email is not valid
          schema:
            $ref: '#/definitions/Error'
  /account/password:
    post:
      summary: set new password
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          type: string
          name: old_password
          minLength: 6
          required: true
        - in: formData
          type: string
          name: new_password
          minLength: 6
          required: true
      security:
        - ApiKeyHeader: []
      tags:
        - account
      responses:
        200:
          description: password has been set
        403:
          description: access denied or old password
          schema:
            $ref: '#/definitions/Error'
  /account/recover:
    post:
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: email
          type: string
          required: true
      tags:
        - account
      responses:
        200:
          description: OK
        400:
          description: Email not found
          schema:
            $ref: '#/definitions/Error'
  /account/invites:
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - account
      responses:
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        200:
          description: invite list
          schema:
            type: object
            properties:
              invites:
                type: array
                items:
                  type: string
  /users/{id}:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - users
      responses:
        200:
          description: User data
          schema:
            $ref: '#/definitions/Profile'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /users/byName/{name}:
    parameters:
      - $ref: '#/parameters/pathName'
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - users
      responses:
        200:
          description: User data
          schema:
            $ref: '#/definitions/Profile'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /users/{id}/followers:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - users
      responses:
        200:
          description: User list
          schema:
            $ref: '#/definitions/UserList'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /users/byName/{name}/followers:
    parameters:
      - $ref: '#/parameters/pathName'
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - users
      responses:
        200:
          description: User list
          schema:
            $ref: '#/definitions/UserList'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /users/{id}/followings:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - users
      responses:
        200:
          description: User list
          schema:
            $ref: '#/definitions/UserList'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /users/byName/{name}/followings:
    $ref: '#/paths/~1users~1byName~1{name}~1followers'
  /users/{id}/invited:
    $ref: '#/paths/~1users~1{id}~1followers'
  /users/byName/{name}/invited:
    $ref: '#/paths/~1users~1byName~1{name}~1followers'
  /users/me:
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - me
      responses:
        200:
          description: your data
          schema:
            $ref: '#/definitions/AuthProfile'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
    put:
      security:
        - ApiKeyHeader: []
      tags:
        - me
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: showName
          type: string
          minLength: 1
          maxLength: 20
        - in: formData
          name: gender
          type: string
          enum: [male, female, not set]
        - in: formData
          name: avatar
          type: file
        - in: formData
          name: isDaylog
          type: boolean
        - in: formData
          name: privacy
          type: string
          enum: [all, registered, followers]
        - in: formData
          name: title
          type: string
          maxLength: 260
        - in: formData
          name: birthday
          type: string
          format: full-date
        - in: formData
          name: country
          type: string
          maxLength: 50
        - in: formData
          name: city
          type: string
          maxLength: 50
        - in: formData
          name: showInTops
          type: boolean
      responses:
        200:
          description: your data
          schema:
            $ref: '#/definitions/Profile'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
  /users/me/followers:
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - me
      responses:
        200:
          description: User list
          schema:
            $ref: '#/definitions/UserList'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
  /users/me/followings:
    $ref: '#/paths/~1users~1me~1followers'
  /users/me/invited:
    $ref: '#/paths/~1users~1me~1followers'
  /users/me/ignored:
    $ref: '#/paths/~1users~1me~1followers'
  /users/me/requested:
    $ref: '#/paths/~1users~1me~1followers'
  /design:
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - design
      responses:
        200:
          description: Design of your tlog
          schema:
            $ref: '#/definitions/Design'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
    put:
      parameters:
        - in: formData
          name: css
          type: string
        - in: formData
          name: backgroundColor
          type: string
          pattern: '#[0-9a-d]{6}'
        - in: formData
          name: textColor
          type: string
          pattern: '#[0-9a-d]{6}'
        - in: formData
          name: fontFamily
          type: string
        - in: formData
          name: fontSize
          type: integer
        - in: formData
          name: textAlignment
          type: string
          enum: [left, right, center, justify]
      security:
        - ApiKeyHeader: []
      tags:
        - design
      responses:
        200:
          description: Design of your tlog
          schema:
            $ref: '#/definitions/Design'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
  /design/fonts:
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - design
      responses:
        200:
          description: List of available font families
          schema:
            type: object
            properties:
              fonts:
                type: array
                items:
                  type: string
  /relations/to/{id}:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - relations
      responses:
        200:
          description: your relationship with the user
          schema:
            $ref: '#/definitions/Relationship'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
    put:
      parameters:
        - in: query
          name: r
          type: string
          enum: [followed, ignored]
          required: true
      security:
        - ApiKeyHeader: []
      tags:
        - relations
      responses:
        200:
          description: your relationship with the user
          schema:
            $ref: '#/definitions/Relationship'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
    delete:
      security:
        - ApiKeyHeader: []
      tags:
        - relations
      responses:
        200:
          description: your relationship with the user
          schema:
            $ref: '#/definitions/Relationship'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /relations/from/{id}:
    parameters:
      - in: path
        name: id
        type: integer
        format: int64
        minimum: 1
        required: true
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - relations
      responses:
        200:
          description: the user relationship with you
          schema:
            $ref: '#/definitions/Relationship'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
    put:
      summary: permit the user to follow you
      security:
        - ApiKeyHeader: []
      tags:
        - relations
      responses:
        200:
          description: the rser relationship with you
          schema:
            $ref: '#/definitions/Relationship'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
    delete:
      summary: cancel following request or unsubscribe the user
      security:
        - ApiKeyHeader: []
      tags:
        - relations
      responses:
        200:
          description: the user relationship with you
          schema:
            $ref: '#/definitions/Relationship'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /entries/live:
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
        - $ref: '#/parameters/tag'
        - $ref: '#/parameters/longerThan'
        - $ref: '#/parameters/shorterThan'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
  /entries/friends:
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
        - $ref: '#/parameters/tag'
        - $ref: '#/parameters/longerThan'
        - $ref: '#/parameters/shorterThan'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
  /entries/best:
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
        - $ref: '#/parameters/tag'
        - $ref: '#/parameters/longerThan'
        - $ref: '#/parameters/shorterThan'
        - in: query
          name: min_rating
          type: integer
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
  /entries/anonymous:
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
        - $ref: '#/parameters/tag'
        - $ref: '#/parameters/longerThan'
        - $ref: '#/parameters/shorterThan'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
    post:
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: title
          type: string
        - in: formData
          name: content
          type: string
        - in: formData
          name: anonymous_comments
          type: boolean
      responses:
        200:
          description: Entry data
          schema:
            $ref: '#/definitions/Entry'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
  /entries/users/{id}:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
        - $ref: '#/parameters/tag'
        - $ref: '#/parameters/sort'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /entries/users/byName/{name}:
    parameters:
      - $ref: '#/parameters/pathName'
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
        - $ref: '#/parameters/tag'
        - $ref: '#/parameters/sort'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /entries/users/{id}/favorites:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /entries/users/byName/{name}/favorites:
    parameters:
      - $ref: '#/parameters/pathName'
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
        404:
          description: User not found
          schema:
            $ref: '#/definitions/Error'
  /entries/users/me:
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
        - $ref: '#/parameters/tag'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
    post:
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: title
          type: string
          maxLength: 500
          default: ''
        - in: formData
          name: content
          type: string
          required: true
          maxLength: 30000
        - in: formData
          name: privacy
          type: string
          enum: [all, followers, some, me]
          default: 'all'
        - in: formData
          name: visibleFor
          type: array
          items:
            type: integer
            format: int64
            minimum: 1
        - in: formData
          name: isVotable
          type: boolean
          default: true
      responses:
        200:
          description: Entry data
          schema:
            $ref: '#/definitions/Entry'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
  /entries/users/me/favorites:
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
  /entries/users/me/watching:
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry list
          schema:
            $ref: '#/definitions/Feed'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
  /entries/{id}:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: Entry data
          schema:
            $ref: '#/definitions/Entry'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    put:
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: title
          type: string
        - in: formData
          name: content
          type: string
          required: true
          maxLength: 30000
        - in: formData
          name: privacy
          type: string
          enum: [all, followers, some, me, anonymous]
        - in: formData
          name: visibleFor
          type: array
          items:
            type: integer
            format: int64
            minimum: 1
        - in: formData
          name: isVotable
          type: boolean
        - in: formData
          name: anonymous_comments
          type: boolean
      responses:
        200:
          description: Entry data
          schema:
            $ref: '#/definitions/Entry'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    delete:
      security:
        - ApiKeyHeader: []
      tags:
        - entries
      responses:
        200:
          description: OK
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
  /entries/{id}/vote:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - votes
      responses:
        200:
          description: vote status
          schema:
            $ref: '#/definitions/VoteStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    put:
      parameters:
        - in: query
          name: positive
          type: boolean
          default: true
      security:
        - ApiKeyHeader: []
      tags:
        - votes
      responses:
        200:
          description: vote status
          schema:
            $ref: '#/definitions/VoteStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    delete:
      security:
        - ApiKeyHeader: []
      tags:
        - votes
      responses:
        200:
          description: vote status
          schema:
            $ref: '#/definitions/VoteStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
  /entries/{id}/favorite:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - favorites
      responses:
        200:
          description: favorite status
          schema:
            $ref: '#/definitions/FavoriteStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    put:
      security:
        - ApiKeyHeader: []
      tags:
        - favorites
      responses:
        200:
          description: favorite status
          schema:
            $ref: '#/definitions/FavoriteStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    delete:
      security:
        - ApiKeyHeader: []
      tags:
        - favorites
      responses:
        200:
          description: favorite status
          schema:
            $ref: '#/definitions/FavoriteStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
  /entries/{id}/watching:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - watchings
      responses:
        200:
          description: watching status
          schema:
            $ref: '#/definitions/WatchingStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    put:
      security:
        - ApiKeyHeader: []
      tags:
        - watchings
      responses:
        200:
          description: watching status
          schema:
            $ref: '#/definitions/WatchingStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    delete:
      security:
        - ApiKeyHeader: []
      tags:
        - watchings
      responses:
        200:
          description: watching status
          schema:
            $ref: '#/definitions/WatchingStatus'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
  /entries/{id}/comments:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      parameters:
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/skip'
      security:
        - ApiKeyHeader: []
      tags:
        - comments
      responses:
        200:
          description: comments list
          schema:
            $ref: '#/definitions/CommentList'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
    post:
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: content
          type: string
          minLength: 1
          required: true
      security:
        - ApiKeyHeader: []
      tags:
        - comments
      responses:
        200:
          description: Comment data
          schema:
            $ref: '#/definitions/Comment'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Entry not found
          schema:
            $ref: '#/definitions/Error'
  /comments/{id}:
    parameters:
      - $ref: '#/parameters/pathId'
    get:
      security:
        - ApiKeyHeader: []
      tags:
        - comments
      responses:
        200:
          description: Comment data
          schema:
            $ref: '#/definitions/Comment'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Comment not found
          schema:
            $ref: '#/definitions/Error'
    put:
      consumes:
        - multipart/form-data
        - application/x-www-form-urlencoded
      parameters:
        - in: formData
          name: content
          type: string
          minLength: 1
          required: true
      security:
        - ApiKeyHeader: []
      tags:
        - comments
      responses:
        200:
          description: Comment data
          schema:
            $ref: '#/definitions/Comment'
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Comment not found
          schema:
            $ref: '#/definitions/Error'
    delete:
      security:
        - ApiKeyHeader: []
      tags:
        - comments
      responses:
        200:
          description: OK
        403:
          description: access denied
          schema:
            $ref: '#/definitions/Error'
        404:
          description: Comment not found
          schema:
            $ref: '#/definitions/Error'
  /comments/{id}/vote:
    $ref: '#/paths/~1entries~1{id}~1vote'
produces:
  - application/json
schemes:
  - http
swagger: '2.0'
basePath: /api/v1
